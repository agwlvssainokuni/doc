[考え方]
(1) 通常
  ・省略無し: 16進表記を":"区切りで8個 ("H...H")
  ・全省略: "::"のみ ("::")
  ・前省略: 頭が"::"で、16進表記を":"区切りで1～7個 ("::H...H")
  ・後省略: 末尾が"::"で、16進表記を":"区切りで1～7個 ("H...H::")
  ・中省略: "::"の前後に16進表記を":"区切りで、合計で1～7個 ("H...H::H...H")

(2) IPv4混在 (末尾が":"+IPv4形式)
  ・省略無し: 16進表記を":"区切りで6個 ("H...H:" + IPv4形式)
  ・全省略: "::"のみ ("::" + IPv4形式)
  ・前省略: 頭が"::"で、16進表記を":"区切りで1～5個 ("::H...H:" + IPv4形式)
  ・後省略: 末尾が"::"で、16進表記を":"区切りで1～5個 ("H...H::" + IPv4形式)
  ・中省略: "::"の前後に16進表記を":"区切りで、合計1～5個 ("H...H::H...H:" + IPv4形式)


[正規表現の組立て]
※短縮するために「大文字小文字を区別しない」オプションをONにする。
  →「(?i)」を使う (Perl, Ruby, Javaの正規表現で使用可能)。

----ここから----
^
(?i)                                            # 「大文字小文字を区別しない」
(
  (                                             # (1) 通常
    [0-9a-f]{1,4}(:[0-9a-f]{1,4}){7}            # ・省略なし
    |::                                         # ・全省略
    |:(:[0-9a-f]{1,4}){1,7}                     # ・前省略
    |([0-9a-f]{1,4}:){1,7}:                     # ・後省略
    |([0-9a-f]{1,4}:){1}(:[0-9a-f]{1,4}){1,6}   # ・中省略
    |([0-9a-f]{1,4}:){2}(:[0-9a-f]{1,4}){1,5}
    |([0-9a-f]{1,4}:){3}(:[0-9a-f]{1,4}){1,4}
    |([0-9a-f]{1,4}:){4}(:[0-9a-f]{1,4}){1,3}
    |([0-9a-f]{1,4}:){5}(:[0-9a-f]{1,4}){1,2}
    |([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}){1}
  )
  |(                                            # (2) IPv4混在
    [0-9a-f]{1,4}(:[0-9a-f]{1,4}){5}            # ・省略無し
    |:                                          # ・全省略
    |:(:[0-9a-f]{1,4}){1,5}                     # ・前省略
    |([0-9a-f]{1,4}:){1,5}                      # ・後省略
    |([0-9a-f]{1,4}:){1}(:[0-9a-f]{1,4}){1,4}   # ・中省略
    |([0-9a-f]{1,4}:){2}(:[0-9a-f]{1,4}){1,3}
    |([0-9a-f]{1,4}:){3}(:[0-9a-f]{1,4}){1,2}
    |([0-9a-f]{1,4}:){4}(:[0-9a-f]{1,4}){1}
  ):(25[0-5]|2[0-4][0-9]|[01]?[0-9]{1,2})(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9]{1,2})){3}   # ・末尾のIPv4形式
)
$
----ここまで----

以上。
